(function(e){function t(t){for(var a,l,c=t[0],i=t[1],u=t[2],d=0,b=[];d<c.length;d++)l=c[d],Object.prototype.hasOwnProperty.call(r,l)&&r[l]&&b.push(r[l][0]),r[l]=0;for(a in i)Object.prototype.hasOwnProperty.call(i,a)&&(e[a]=i[a]);s&&s(t);while(b.length)b.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],a=!0,c=1;c<n.length;c++){var i=n[c];0!==r[i]&&(a=!1)}a&&(o.splice(t--,1),e=l(l.s=n[0]))}return e}var a={},r={app:0},o=[];function l(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,l),n.l=!0,n.exports}l.m=e,l.c=a,l.d=function(e,t,n){l.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},l.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(e,t){if(1&t&&(e=l(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(l.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)l.d(n,a,function(t){return e[t]}.bind(null,a));return n},l.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return l.d(t,"a",t),t},l.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},l.p="/toonify/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],i=c.push.bind(c);c.push=t,c=c.slice();for(var u=0;u<c.length;u++)t(c[u]);var s=i;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"2e0b":function(e,t,n){"use strict";n("891b")},"2f64":function(e,t,n){},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var a=n("7a23");function r(e,t,n,r,o,l){var c=Object(a["l"])("Toonify");return Object(a["g"])(),Object(a["d"])(c)}var o=Object(a["p"])("data-v-26f138c5");Object(a["i"])("data-v-26f138c5");var l={class:"d-flex flex-column vh-100"},c={class:"d-flex flex-grow-1 flex-row",style:{height:"10px"}};Object(a["h"])();var i=o((function(e,t,n,r,o,i){var u=Object(a["l"])("navbar"),s=Object(a["l"])("image-viewer"),d=Object(a["l"])("filter-config"),b=Object(a["l"])("loading-bar"),f=Object(a["l"])("image-history");return Object(a["g"])(),Object(a["d"])("div",l,[Object(a["f"])(u),Object(a["f"])("div",c,[Object(a["f"])(s,{class:"flex-grow-1",image:e.currentImage,onUpload:i.uploadImage},null,8,["image","onUpload"]),e.currentImage?(Object(a["g"])(),Object(a["d"])(d,{key:0,running:e.loadingGallery,modelValue:o.filterConfig,"onUpdate:modelValue":t[1]||(t[1]=function(e){return o.filterConfig=e}),onUpload:i.uploadImage,onStart:i.startFilter,onStop:e.stopGenerating},null,8,["running","modelValue","onUpload","onStart","onStop"])):Object(a["e"])("",!0)]),e.loadingGallery?(Object(a["g"])(),Object(a["d"])(b,{key:0,text:e.stepText,progress:e.stepProgress},null,8,["text","progress"])):Object(a["e"])("",!0),Object(a["f"])(f,{images:e.gallery,selected:e.selectedImage,generating:e.loadingGallery,onSelect:t[2]||(t[2]=function(t){return e.selectImage(t)})},null,8,["images","selected","generating"])])})),u=(n("96cf"),n("1da1")),s=n("5530"),d=n("722e"),b=n.n(d),f=function(){var e=document.createElement("canvas"),t=e.getContext("2d"),n=function(n){var a=n.width,r=n.height;return e.width=a,e.height=r,t.drawImage(n,0,0),t.getImageData(0,0,n.width,n.height)},a=function(n){var a=n.width,r=n.height;return e.width=a,e.height=r,t.putImageData(n,0,0),e.toDataURL("image/jpeg")};return{toImageData:n,toDataUrl:a}},g=f,p=function(){var e=g(),t=e.toDataUrl,n=Object(a["j"])([]),r=Object(a["j"])(0),o=Object(a["j"])(!0),l=Object(a["j"])(!1),c=Object(a["j"])(null),i=0,s=function(){n.value=[],r.value=0,o.value=!0,l.value=!1,c.value=!1,i++},d=function(e){var n=e.type,a=e.tooltip,r=e.data,o=e.url;return r&&!o&&(o=t(r)),{type:n,tooltip:a,url:o}},b=function(e){n.value.push(d(e)),o.value&&(r.value=n.value.length-1)},f=function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(t){var n,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return c.value={text:"PROCESSING EDGES...",progress:10},l.value=!0,n=i,a=function(){var e=Object(u["a"])(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.next();case 2:if(r=e.sent,!r.done){e.next=5;break}return e.abrupt("return",!0);case 5:if(i==n){e.next=7;break}return e.abrupt("return",!1);case 7:return b(r.value),c.value=r.value.step,e.next=11,a();case 11:return e.abrupt("return",e.sent);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.next=6,a();case 6:r=e.sent,r&&(i++,l.value=!1,c.value={text:"COMPLETE",progress:100});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){i++,l.value=!1},m=function(e){if(e<0&&e>=n.value.length)throw Error("Image index ".concat(e," is out of bounds."));o.value=!1,r.value=e},O=Object(a["b"])((function(){return!n.value||0==n.value.length})),j=Object(a["b"])((function(){return n.value[r.value]})),v=Object(a["b"])((function(){return c.value?c.value.text:"LOADING..."})),h=Object(a["b"])((function(){return c.value?c.value.progress:50}));return{gallery:n,selectedImage:r,autoSelectImage:o,loadingGallery:l,step:c,clearGallery:s,pushImage:b,generateGallery:f,stopGenerating:p,selectImage:m,isGalleryEmpty:O,currentImage:j,stepText:v,stepProgress:h}},m=p,O={class:"navbar navbar-dark bg-dark"},j=Object(a["f"])("div",{class:"container-fluid"},[Object(a["f"])("span",{class:"navbar-brand mb-0 h1"},"Toonify"),Object(a["f"])("a",{href:"https://github.com/hyrumcoop/toonify"},[Object(a["f"])("i",{class:"bi bi-github text-white fs-4"})])],-1);function v(e,t,n,r,o,l){return Object(a["g"])(),Object(a["d"])("nav",O,[j])}var h={name:"Navbar"};h.render=v;var y=h,I=Object(a["p"])("data-v-69d28036");Object(a["i"])("data-v-69d28036");var w={class:"image-viewer h-100"},x={key:0,class:"image-container",ref:"imageContainer"},k={class:"image-inner-container"},U={class:"image-overlay"},C=Object(a["f"])("i",{class:"bi bi-file-earmark-arrow-down-fill"},null,-1),R={key:1,class:"upload-container d-flex"},S={class:"upload-options shadow rounded"},L=Object(a["f"])("div",{class:"btn-divider font-monospace"},[Object(a["f"])("span",null,"OR")],-1);Object(a["h"])();var G=I((function(e,t,n,r,o,l){var c=Object(a["l"])("image-url-modal");return Object(a["g"])(),Object(a["d"])("div",w,[n.image?(Object(a["g"])(),Object(a["d"])("div",x,[Object(a["f"])("div",k,[Object(a["f"])("img",{class:"image",src:l.imageUrl,crossOrigin:"Anonymous"},null,8,["src"]),Object(a["f"])("div",U,[Object(a["f"])("a",{class:"btn btn-light btn-lg",href:l.imageUrl,download:""},[C],8,["href"])])])],512)):Object(a["e"])("",!0),n.image?Object(a["e"])("",!0):(Object(a["g"])(),Object(a["d"])("div",R,[Object(a["f"])("input",{class:"d-none",type:"file",accept:"image/png, image/jpeg",ref:"uploadInput",onChange:t[1]||(t[1]=function(){return e.uploadImage&&e.uploadImage.apply(e,arguments)})},null,544),Object(a["f"])("div",S,[Object(a["f"])("button",{class:"d-block w-100 btn btn-primary font-monospace fw-bold",onClick:t[2]||(t[2]=function(t){return e.$refs.uploadInput.click()})},"UPLOAD IMAGE"),L,Object(a["f"])("button",{class:"d-block w-100 btn btn-secondary font-monospace fw-bold",onClick:t[3]||(t[3]=function(t){return e.$refs.modal.show()})}," LOAD URL ")])])),Object(a["f"])(c,{ref:"modal",onUpload:t[4]||(t[4]=function(t){return e.loadUrl(t)})},null,512)])})),_=function(){var e=function(e){var t=this,n=e.target.files[0],a=new FileReader;a.onload=function(e){t.loadUrl(e.target.result)},a.readAsDataURL(n)},t=function(e){var t=this,n=new Image;n.crossOrigin="Anonymous",n.src=e,n.onload=function(){t.$emit("upload",n)}};return{uploadImage:e,loadUrl:t}},D=_,A=Object(a["p"])("data-v-44cd4be2");Object(a["i"])("data-v-44cd4be2");var T={class:"modal fade",id:"urlModal",ref:"modal"},E={class:"modal-dialog modal-dialog-centered"},P={class:"modal-content"},V=Object(a["f"])("div",{class:"modal-header"},[Object(a["f"])("h5",{class:"modal-title"},"Load Image by URL"),Object(a["f"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),M={class:"modal-body"},N=Object(a["f"])("label",{for:"image-url",class:"col-form-label"},"Image URL",-1),$={class:"text-danger mt-2 mb-0"},F={class:"modal-footer"},q=Object(a["f"])("button",{type:"button",class:"btn btn-secondary","data-bs-dismiss":"modal"},"Close",-1);Object(a["h"])();var z=A((function(e,t,n,r,o,l){return Object(a["g"])(),Object(a["d"])("div",T,[Object(a["f"])("div",E,[Object(a["f"])("div",P,[V,Object(a["f"])("div",M,[Object(a["f"])("form",null,[Object(a["f"])("div",null,[N,Object(a["o"])(Object(a["f"])("input",{type:"text",class:"form-control",id:"image-url","onUpdate:modelValue":t[1]||(t[1]=function(e){return o.urlInput=e})},null,512),[[a["n"],o.urlInput]]),Object(a["f"])("p",$,Object(a["m"])(o.error),1)])])]),Object(a["f"])("div",F,[q,Object(a["f"])("button",{type:"button",class:"btn btn-primary",onClick:t[2]||(t[2]=function(){return l.uploadImage&&l.uploadImage.apply(l,arguments)})},"Upload")])])])],512)})),B=(n("d3b7"),n("3ca3"),n("ddb0"),n("2b3d"),n("1157")),H=n.n(B),J={name:"ImageUrlModal",data:function(){return{urlInput:"",error:null}},methods:{uploadImage:function(){try{new URL(this.urlInput)}catch(e){return void(this.error="Invalid URL.")}this.error=null,this.hide(),this.$emit("upload",this.urlInput)},show:function(){H()(this.$refs.modal).modal("show")},hide:function(){H()(this.$refs.modal).modal("hide")}}};J.render=z,J.__scopeId="data-v-44cd4be2";var Q=J,W={name:"ImageViewer",components:{ImageUrlModal:Q},props:["image"],setup:function(){return D()},computed:{imageUrl:function(){return this.image&&this.image.url}}};n("2e0b");W.render=G,W.__scopeId="data-v-69d28036";var Z=W,K=Object(a["p"])("data-v-e6ee0eb8");Object(a["i"])("data-v-e6ee0eb8");var X={class:"sidebar d-flex flex-column shadow-sm"},Y=Object(a["f"])("h5",{class:"sidebar-heading"},"FILTER CONFIG",-1),ee={class:"config-group"},te=Object(a["f"])("label",{for:"edges-input",class:"form-label fw-bold"},"EDGES",-1),ne={class:"config-group"},ae=Object(a["f"])("label",{for:"blur-input",class:"form-label fw-bold"},"BLUR",-1),re={class:"config-group"},oe=Object(a["f"])("label",{for:"quantization-input",class:"form-label fw-bold"},"QUANTIZATION",-1),le={class:"config-group mb-0"},ce={key:0},ie=Object(a["f"])("hr",null,null,-1),ue={class:"config-group"},se={class:"config-group"};Object(a["h"])();var de=K((function(e,t,n,r,o,l){var c=Object(a["l"])("image-url-modal");return Object(a["g"])(),Object(a["d"])("div",X,[Y,Object(a["f"])("div",ee,[te,Object(a["f"])("input",{type:"range",class:"form-range",min:"5",max:"500",id:"edges-input",disabled:n.running,value:n.modelValue.edges,onInput:t[1]||(t[1]=function(e){return l.updateConfig(e,"edges")})},null,40,["disabled","value"])]),Object(a["f"])("div",ne,[ae,Object(a["f"])("input",{type:"range",class:"form-range",min:"8",max:"20",id:"blur-input",disabled:n.running,value:n.modelValue.blur,onInput:t[2]||(t[2]=function(e){return l.updateConfig(e,"blur")})},null,40,["disabled","value"])]),Object(a["f"])("div",re,[oe,Object(a["f"])("input",{type:"range",class:"form-range",min:"1",max:"168",id:"quantization-input",disabled:n.running,value:n.modelValue.quantization,onInput:t[3]||(t[3]=function(e){return l.updateConfig(e,"quantization")})},null,40,["disabled","value"])]),Object(a["f"])("div",le,[Object(a["f"])("button",{class:["btn w-100 fw-bold",{"btn-primary":!n.running,"btn-secondary":n.running}],onClick:t[4]||(t[4]=function(t){return e.$emit(n.running?"stop":"start")})},Object(a["m"])(n.running?"STOP":"FILTER"),3)]),n.running?Object(a["e"])("",!0):(Object(a["g"])(),Object(a["d"])("div",ce,[ie,Object(a["f"])("div",ue,[Object(a["f"])("button",{class:"btn btn-primary w-100 fw-bold",onClick:t[5]||(t[5]=function(t){return e.$refs.uploadInput.click()})},"UPLOAD IMAGE")]),Object(a["f"])("div",se,[Object(a["f"])("button",{class:"btn btn-secondary w-100 fw-bold",onClick:t[6]||(t[6]=function(t){return e.$refs.modal.show()})},"LOAD URL")])])),Object(a["f"])("input",{class:"d-none",type:"file",accept:"image/png, image/jpeg",ref:"uploadInput",onChange:t[7]||(t[7]=function(){return e.uploadImage&&e.uploadImage.apply(e,arguments)})},null,544),Object(a["f"])(c,{ref:"modal",onUpload:t[8]||(t[8]=function(t){return e.loadUrl(t)})},null,512)])})),be=n("ade3"),fe={name:"FilterConfig",components:{ImageUrlModal:Q},props:{running:Boolean,modelValue:{type:Object,default:function(){return{edges:440,blur:14,quantization:24}}}},setup:function(){return D()},methods:{updateConfig:function(e,t){this.$emit("update:modelValue",Object(s["a"])(Object(s["a"])({},this.modelValue),{},Object(be["a"])({},t,parseInt(e.target.value))))}}};n("6d71");fe.render=de,fe.__scopeId="data-v-e6ee0eb8";var ge=fe,pe=Object(a["p"])("data-v-bbd1bbae");Object(a["i"])("data-v-bbd1bbae");var me={class:"progress"},Oe={class:"font-monospace"};Object(a["h"])();var je=pe((function(e,t,n,r,o,l){return Object(a["g"])(),Object(a["d"])("div",me,[Object(a["f"])("div",{class:"progress-bar progress-bar-striped progress-bar-animated",style:{width:l.percentageText}},[Object(a["f"])("span",Oe,Object(a["m"])(n.text),1)],4)])})),ve=(n("a9e3"),{name:"LoadingBar",data:function(){return{currentStep:0}},props:{progress:{type:Number,default:100},text:{type:String,default:"LOADING..."}},computed:{percentageText:function(){return this.progress?this.progress+"%":"100%"}}});n("7bf5");ve.render=je,ve.__scopeId="data-v-bbd1bbae";var he=ve,ye=Object(a["p"])("data-v-088045e7");Object(a["i"])("data-v-088045e7");var Ie={class:"image-history-bar"},we={key:0,class:"images d-flex flex-row"},xe={key:0,href:"#",class:"preview-image loading-image"},ke=Object(a["f"])("div",{class:"loading-spinner-box"},[Object(a["f"])("div",{class:"spinner-border",role:"status"},[Object(a["f"])("span",{class:"visually-hidden"},"Loading...")])],-1),Ue={key:1,class:"no-images"},Ce=Object(a["f"])("p",{class:"m-0"},"No images.",-1);Object(a["h"])();var Re=ye((function(e,t,n,r,o,l){return Object(a["g"])(),Object(a["d"])("div",Ie,[l.hasImages?(Object(a["g"])(),Object(a["d"])("div",we,[(Object(a["g"])(!0),Object(a["d"])(a["a"],null,Object(a["k"])(n.images,(function(e,t){return Object(a["g"])(),Object(a["d"])("a",{href:"#",class:["preview-image",{active:l.isSelected(t)}],key:t,onClick:function(e){return l.selectImage(t)}},[Object(a["f"])("img",{src:e.url,alt:e.tooltip,crossOrigin:"Anonymous"},null,8,["src","alt"])],10,["onClick"])})),128)),n.generating?(Object(a["g"])(),Object(a["d"])("a",xe,[ke,Object(a["f"])("img",{src:l.firstImage.url,alt:l.firstImage.tooltip,crossOrigin:"Anonymous"},null,8,["src","alt"])])):Object(a["e"])("",!0)])):(Object(a["g"])(),Object(a["d"])("div",Ue,[Ce]))])})),Se={name:"ImageHistory",props:{images:Array,selected:{type:Number,default:0},generating:Boolean},methods:{selectImage:function(e){this.$emit("select",e)},isSelected:function(e){return e==this.selected}},computed:{hasImages:function(){return!!this.images&&this.images.length>0},firstImage:function(){return this.hasImages?this.images[0]:null}}};n("873f");Se.render=Re,Se.__scopeId="data-v-088045e7";var Le=Se,Ge={name:"Toonify",components:{Navbar:y,ImageViewer:Z,FilterConfig:ge,LoadingBar:he,ImageHistory:Le},setup:function(){return Object(s["a"])(Object(s["a"])({},g()),m())},data:function(){return{filterConfig:{edges:440,blur:14,quantization:24},firstStart:!0,uploadedImage:null,uploadedImageData:null}},mounted:function(){return Object(u["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,b.a.load();case 2:console.log("OpenCV loaded");case 3:case"end":return e.stop()}}),e)})))()},methods:{uploadImage:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:t.clearGallery(),t.pushImage({type:"original",url:e.src,tooltip:"Original Image"}),t.uploadedImage=e,t.uploadedImageData=t.toImageData(e),t.firstStart&&(t.firstStart=!1,t.startFilter());case 5:case"end":return n.stop()}}),n)})))()},startFilter:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.loadingGallery){t.next=2;break}return t.abrupt("return");case 2:return e.clearGallery(),e.pushImage({type:"original",url:e.uploadedImage.src,tooltip:"Original Image"}),n=Object.assign({},e.filterConfig),a={data:e.uploadedImageData,config:n},t.t0=e,t.next=9,b.a.toonify(a);case 9:return t.t1=t.sent,t.next=12,t.t0.generateGallery.call(t.t0,t.t1);case 12:case"end":return t.stop()}}),t)})))()}}};Ge.render=i,Ge.__scopeId="data-v-26f138c5";var _e=Ge,De={name:"App",components:{Toonify:_e}};De.render=r;var Ae=De;n("7b17"),n("ab8b"),n("cd74");Object(a["c"])(Ae).mount("#app")},"6d71":function(e,t,n){"use strict";n("2f64")},"6dae":function(e,t,n){},"722e":function(e,t,n){e.exports=n("3d15").wrap(n("c39d")()),e.exports.__esModule=!0},"7bf5":function(e,t,n){"use strict";n("6dae")},"873f":function(e,t,n){"use strict";n("ffbb")},"891b":function(e,t,n){},c39d:function(e,t,n){e.exports=function(){return new Worker(n.p+"317373800d0d8770e2da.worker.js")}},ffbb:function(e,t,n){}});
//# sourceMappingURL=app.180ca98d.js.map